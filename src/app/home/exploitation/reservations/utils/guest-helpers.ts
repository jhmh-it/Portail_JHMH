/**
 * Helper functions pour extraire les informations des guests
 */

/**
 * Fonction générique pour lire la première valeur non-null d'une liste
 */
export function readFirst<T>(...values: Array<T | null | undefined>): T | null {
  for (const v of values) {
    if (v !== undefined && v !== null) {
      return v as T;
    }
  }
  return null;
}

/**
 * Extrait le nom du guest depuis différents champs possibles
 */
export function extractGuestName(
  reservation: Record<string, unknown>
): string | null {
  return readFirst<string>(
    reservation.GUEST_NAME as string,
    reservation.guest_fullName as string,
    reservation.guest_name as string
  );
}

/**
 * Extrait l'email du guest depuis différents champs possibles
 */
export function extractGuestEmail(
  reservation: Record<string, unknown>
): string | null {
  return readFirst<string>(
    reservation.GUEST_EMAIL as string,
    reservation.guest_email as string
  );
}

/**
 * Extrait le téléphone du guest depuis différents champs possibles
 */
export function extractGuestPhone(
  reservation: Record<string, unknown>
): string | null {
  return readFirst<string>(
    reservation.GUEST_PHONE as string,
    reservation.guest_phone as string
  );
}
